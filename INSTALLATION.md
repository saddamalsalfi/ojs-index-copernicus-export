# دليل تثبيت إضافة Index Copernicus Export Plugin

## المتطلبات الأساسية

قبل البدء في تثبيت الإضافة، تأكد من توفر المتطلبات التالية:

### متطلبات النظام
- **Open Journal Systems (OJS)**: الإصدار 3.5.0-1 أو أحدث
- **PHP**: الإصدار 8.2.0 أو أحدث
- **امتدادات PHP المطلوبة**:
  - DOM extension
  - libxml extension
  - mbstring extension
- **قاعدة البيانات**: MySQL 5.7+ أو PostgreSQL 9.5+
- **خادم الويب**: Apache 2.4+ أو Nginx 1.14+

### التحقق من متطلبات PHP

يمكنك التحقق من إصدار PHP والامتدادات المثبتة باستخدام الأوامر التالية:

```bash
# التحقق من إصدار PHP
php -v

# التحقق من الامتدادات المثبتة
php -m | grep -E "(dom|libxml|mbstring)"
```

## خطوات التثبيت

### الخطوة 1: تحميل ملفات الإضافة

1. قم بتحميل ملفات الإضافة من المصدر المعتمد
2. فك ضغط الملفات إذا كانت في أرشيف مضغوط
3. تأكد من وجود جميع الملفات المطلوبة:
   ```
   copernicus/
   ├── CopernicusPlugin.php
   ├── index.php
   ├── version.xml
   ├── README.md
   ├── INSTALLATION.md
   ├── locale/
   │   ├── en/
   │   │   └── locale.po
   │   └── ar/
   │       └── locale.po
   └── templates/
       ├── index.tpl
       └── issues.tpl
   ```

### الخطوة 2: رفع الملفات إلى الخادم

1. انتقل إلى مجلد تثبيت OJS على الخادم
2. انتقل إلى مجلد `plugins/importexport/`
3. أنشئ مجلد جديد باسم `copernicus`
4. ارفع جميع ملفات الإضافة إلى هذا المجلد

```bash
# مثال على الأوامر في Linux/Unix
cd /path/to/ojs/installation
mkdir -p plugins/importexport/copernicus
cp -r /path/to/plugin/files/* plugins/importexport/copernicus/
```

### الخطوة 3: تعيين الصلاحيات

تأكد من أن ملفات الإضافة لها الصلاحيات المناسبة:

```bash
# تعيين صلاحيات القراءة والتنفيذ
chmod -R 755 plugins/importexport/copernicus/
chown -R www-data:www-data plugins/importexport/copernicus/
```

### الخطوة 4: تفعيل الإضافة

1. سجل الدخول إلى لوحة إدارة OJS كمدير موقع
2. انتقل إلى **الإعدادات** > **الموقع** > **الإضافات**
3. ابحث عن تبويب **استيراد/تصدير**
4. ابحث عن "Index Copernicus Export Plugin"
5. انقر على **تفعيل** بجانب اسم الإضافة

### الخطوة 5: التحقق من التثبيت

للتأكد من نجاح التثبيت:

1. انتقل إلى **أدوات** > **استيراد/تصدير**
2. يجب أن تظهر "Index Copernicus Export Plugin" في قائمة الإضافات المتاحة
3. انقر على الإضافة للتأكد من عملها بشكل صحيح

## استكشاف الأخطاء وإصلاحها

### مشاكل شائعة وحلولها

#### الإضافة لا تظهر في قائمة الإضافات

**الأسباب المحتملة:**
- ملفات الإضافة غير موجودة في المكان الصحيح
- صلاحيات الملفات غير صحيحة
- إصدار OJS غير متوافق

**الحلول:**
1. تأكد من وجود الملفات في `plugins/importexport/copernicus/`
2. تحقق من صلاحيات الملفات باستخدام `ls -la`
3. راجع ملف `version.xml` للتأكد من التوافق

#### رسالة خطأ عند تفعيل الإضافة

**الأسباب المحتملة:**
- امتدادات PHP مفقودة
- أخطاء في بناء الكود
- تضارب مع إضافات أخرى

**الحلول:**
1. تحقق من ملفات السجل في `files/journals/[journal_id]/log/`
2. تأكد من تثبيت امتدادات PHP المطلوبة
3. تحقق من عدم وجود إضافات أخرى متضاربة

#### مشاكل في تصدير XML

**الأسباب المحتملة:**
- بيانات مفقودة في المقالات أو الأعداد
- مشاكل في ترميز النصوص
- قيود على حجم الذاكرة

**الحلول:**
1. تأكد من اكتمال البيانات المطلوبة (العنوان، المؤلفون، الملخص)
2. تحقق من ترميز UTF-8 للنصوص العربية
3. زيادة حد الذاكرة في PHP إذا لزم الأمر

### فحص ملفات السجل

لمراجعة ملفات السجل والأخطاء:

```bash
# عرض آخر الأخطاء في سجل PHP
tail -f /var/log/php/error.log

# عرض سجل OJS
tail -f /path/to/ojs/files/journals/[journal_id]/log/ojs.log
```

## التحديث

عند توفر إصدار جديد من الإضافة:

1. قم بعمل نسخة احتياطية من الملفات الحالية
2. عطل الإضافة من لوحة الإدارة
3. استبدل الملفات القديمة بالجديدة
4. فعل الإضافة مرة أخرى
5. تحقق من عمل الإضافة بشكل صحيح

## الدعم الفني

إذا واجهت مشاكل في التثبيت:

1. راجع هذا الدليل مرة أخرى
2. تحقق من ملفات السجل للحصول على تفاصيل الأخطاء
3. تأكد من توافق جميع المتطلبات
4. راجع وثائق OJS الرسمية للحصول على معلومات إضافية

## ملاحظات مهمة

- **النسخ الاحتياطية**: قم دائماً بعمل نسخة احتياطية من موقع OJS قبل تثبيت أي إضافة جديدة
- **بيئة الاختبار**: اختبر الإضافة في بيئة تطوير قبل التثبيت في الموقع الإنتاجي
- **التحديثات**: تابع التحديثات الجديدة للإضافة لضمان الأمان والتوافق
- **الأداء**: راقب أداء الموقع بعد تثبيت الإضافة، خاصة عند تصدير أعداد كبيرة

